<dfy-header></dfy-header>
<main class="main-content">
  <div class="econtent">
    <div class="section-banner">
      <div class="banner-details">
        <p class="banner-details-title">Challenge creation</p>
        <p class="banner-details-description">Create your own challenge and share it to your friends</p>
      </div>
    </div>
    <div>
      <div>
        <div class="challenge-preview-banner">
          <input type="file" class="file-upload" accept="image/png, image/jpeg"
                 (change)="onPreviewCoverSelected($event)"  [customFocus]="'user-input-active'">
          <div class="placeholder" *ngIf="!selectedCoverFile">
            <svg width="32" height="32" viewBox="0 0 24 24">
              <path
                d="M18 15v4c0 .55-.45 1-1 1H5c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h3.02c.55 0 1-.45 1-1s-.45-1-1-1H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5c0-.55-.45-1-1-1s-1 .45-1 1zm-2.5 3H6.52c-.42 0-.65-.48-.39-.81l1.74-2.23a.5.5 0 0 1 .78-.01l1.56 1.88l2.35-3.02c.2-.26.6-.26.79.01l2.55 3.39c.25.32.01.79-.4.79zm3.8-9.11c.48-.77.75-1.67.69-2.66c-.13-2.15-1.84-3.97-3.97-4.2A4.5 4.5 0 0 0 11 6.5c0 2.49 2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7l2.41 2.41c.39.39 1.03.39 1.42 0c.39-.39.39-1.03 0-1.42l-2.41-2.4zM15.5 9a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z"/>
            </svg>
            <p>Click to choose a cover image that makes your challenge shine!</p>
          </div>
          <img [src]="getPreviewCover()" alt="" *ngIf="selectedCoverFile">
        </div>
        <div class="edit-zone">
          <form [formGroup]="challengeForm">
            <div class="attr align-center">
              <p class="attr-key">Preview Icon</p>
              <p class="attr-description">The challenge's preview icon</p>
              <div class="challenge-preview-icon">
                <input type="file" class="file-upload" accept="image/png, image/jpeg"
                       (change)="onPreviewIconSelected($event)" [customFocus]="'user-input-active'">
                <img [src]="getPreviewIcon()" alt="" *ngIf="selectedIconFile">
                <img src="assets/challenge_icon_placeholder.svg" alt="" *ngIf="!selectedIconFile">
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">Title</p>
              <p class="attr-description">The challenge's title</p>
              <div class="user-input">
                <div class="user-input-box">
                  <label for="title">Title</label>
                  <input id="title" class="form-control" name="title" type="text" #text_input
                         formControlName="title"  [customFocus]="'user-input-active'">
                </div>
                <p class="user-input-error" *ngIf="challengeForm.get('title')?.hasError('required')">
                  Title is required</p>
                <p class="user-input-error" *ngIf="challengeForm.get('title')?.hasError('minlength')">
                  Title must be 2 or more characters</p>
                <p class="user-input-error" *ngIf="challengeForm.get('title')?.hasError('maxlength')">
                  Title must be 24 or less characters</p>
                <p class="user-input-error" *ngIf="challengeForm.get('title')?.hasError('pattern')">
                  Please enter a valid title</p>
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">Description</p>
              <p class="attr-description">The challenge's description</p>
              <div class="user-input">
                <div class="user-input-box">
                  <label for="description">Description</label>
                  <textarea id="description" class="form-control" name="description" #text_input
                            rows="5" cols="33" formControlName="description" [customFocus]="'user-input-active'"></textarea>
                </div>
                <p class="user-input-error"
                   *ngIf="challengeForm.get('description')?.hasError('maxlength')">Description must be
                  128 or less characters</p>
                <p class="user-input-error"
                   *ngIf="challengeForm.get('description')?.hasError('pattern')">Please enter a valid
                  description</p>
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">Theme</p>
              <p class="attr-description">The challenge's theme</p>
              <div class="user-input">
                <div class="user-input-box">
                  <label for="theme">Theme</label>
                  <input id="theme" class="form-control" type="text" name="theme" #text_input
                         formControlName="theme" [customFocus]="'user-input-active'">
                </div>
                <p class="user-input-error" *ngIf="challengeForm.get('theme')?.hasError('required')">
                  Theme is required</p>
              </div>
            </div>
          </form>
          <form [formGroup]="challengeForm">
            <div class="attr">
              <p class="attr-key">Access Type</p>
              <p class="attr-description">The way users will be allowed to join your challenge</p>
              <dfy-custom-select [control]="challengeForm.controls.accessType" [data]="getAccessTypes()"></dfy-custom-select>
            </div>
            <div class="attr">
              <p class="attr-key">Start date</p>
              <p class="attr-description">The challenge's start date</p>
              <div class="user-input user-input-active">
                <div class="user-input-box">
                  <label for="startsAt">Start date</label>
                  <input id="startsAt" class="form-control" name="startsAt" type="datetime-local" formControlName="startsAt" [customFocus]="'user-input-active'">
                </div>
                <p class="user-input-error" *ngIf="challengeForm.get('start')?.hasError('required')">
                  Start date is required</p>
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">End date</p>
              <p class="attr-description">The challenge's end date</p>
              <div class="user-input user-input-active">
                <div class="user-input-box">
                  <label for="endsAt">End date</label>
                  <input id="endsAt" class="form-control" name="endsAt" type="datetime-local" formControlName="endsAt" [customFocus]="'user-input-active'">
                </div>
                <p class="user-input-error" *ngIf="challengeForm.get('endAt')?.hasError('required')">End
                  date is required</p>
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">Voting period</p>
              <p class="attr-description">Voting time period, by default start date is equals to the challenge's end date and end date 24 hours after.</p>
              <div class="user-input user-input-active">
                <div class="user-input-box">
                  <label for="votes-starts-at">Start date</label>
                  <input id="votes-starts-at" class="form-control" name="votesStartsAt" type="datetime-local" formControlName="votesStartsTime" [customFocus]="'user-input-active'">
                </div>
              </div>
              <div class="user-input user-input-active">
                <div class="user-input-box">
                  <label for="votes-ends-at">End date</label>
                  <input id="votes-ends-at" class="form-control" name="votesEndsAt" type="datetime-local" formControlName="votesEndsTime" [customFocus]="'user-input-active'">
                </div>
              </div>
            </div>
            <div class="attr">
              <p class="attr-key">Members limit</p>
              <p class="attr-description">The challenge's maximum members count</p>
              <dfy-custom-slider [control]="challengeForm.controls.capacity" [min]="2" [max]="60"></dfy-custom-slider>
            </div>
            <div class="attr">
              <p class="attr-key">Group size</p>
              <p class="attr-description">The challenge's maximum members in a group</p>
              <dfy-custom-slider [control]="challengeForm.controls.groupSize" [min]="1" [max]="10"></dfy-custom-slider>
            </div>
            <div class="attr">
              <p class="attr-key">Allow spectators</p>
              <p class="attr-description">
                <dfy-custom-checkbox [control]="challengeForm.controls.spectatorsAllowed" [label]="'Allow users to join as spectator'"></dfy-custom-checkbox>
              </p>
            </div>
          </form>
        </div>
      </div>
      <div class="action-bar">
        <a class="cancel-challenge-btn" [routerLink]="['/']">Back to home</a>
        <input class="create-challenge-btn" type="submit" value="Create" (click)="onSubmit()" [customFocus]="'user-input-active'">
      </div>
    </div>
  </div>
</main>
<dfy-footer></dfy-footer>
<dfy-splash-screen class="splash-screen" *ngIf="showSplashScreen"></dfy-splash-screen>

