<dfy-header></dfy-header>
<main class="main-content">
  <div class="content">
    <div class="challenge-preview">
      <div class="challenge-preview-banner" [ngStyle]="{'background-image': 'url('+ bannerUrl +')'}">
        <div class="challenge-preview-icon">
          <img [src]="iconUrl" alt="">
        </div>
      </div>
      <div class="challenge-preview-info-short">
        <p class="challenge-preview-info-short-title">
          {{challenge.title}}
          <button class="challenge-preview-share tooltip-owner" (click)="onShare()">
            <span class="tooltip">Share</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
              <path
                d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
          </button>
        </p>
        <div class="challenge-preview-info-short-author">
          <img [src]="authorAvatarUrl" alt="">
          <p>By <span class="challenge-preview-info-short-author-username"
                      [routerLink]="['/app/user/', challenge.author ? challenge.author.username : '']">{{challenge.author ? challenge.author.username : 'Unknown'}}</span>
          </p>
        </div>
      </div>
      <!--<span class="overview-mode-message" *ngIf="!isMember()">This is an overview</span>-->
    </div>
    <div class="challenge-sections">
      <nav class="challenge-sections-nav">
        <button class="challenge-sections-nav-scroll-btn" (click)="onMenuLeft()">
          <svg width="32" height="32" viewBox="0 0 24 24">
            <path
              d="M14.71 15.88L10.83 12l3.88-3.88a.996.996 0 1 0-1.41-1.41L8.71 11.3a.996.996 0 0 0 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0c.38-.39.39-1.03 0-1.42z"/>
          </svg>
        </button>
        <ul #sections>
          <li [ngClass]="isOnSection('overview') ? 'challenge-sections-selected' : ''" (click)="onOverview()">
            <span class="challenge-sections-name">Overview</span>
            <svg width="32" height="32" viewBox="0 0 24 24">
              <path fill="none" stroke-width="1.5"
                    d="M3 9.4V3.6a.6.6 0 0 1 .6-.6h16.8a.6.6 0 0 1 .6.6v5.8a.6.6 0 0 1-.6.6H3.6a.6.6 0 0 1-.6-.6Zm11 11v-5.8a.6.6 0 0 1 .6-.6h5.8a.6.6 0 0 1 .6.6v5.8a.6.6 0 0 1-.6.6h-5.8a.6.6 0 0 1-.6-.6Zm-11 0v-5.8a.6.6 0 0 1 .6-.6h5.8a.6.6 0 0 1 .6.6v5.8a.6.6 0 0 1-.6.6H3.6a.6.6 0 0 1-.6-.6Z"/>
            </svg>
          </li>
          <li [ngClass]="isOnSection('chats') ? 'challenge-sections-selected' : ''" (click)="onChats()"
              *ngIf="isMember()">
            <span class="challenge-sections-name">Chats</span>
            <svg width="32" height="32" viewBox="0 0 24 24">
              <g fill="none" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7 12h10M7 8h6"/>
                <path
                  d="M3 20.29V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7.961a2 2 0 0 0-1.561.75l-2.331 2.914A.6.6 0 0 1 3 20.29Z"/>
              </g>
            </svg>
          </li>
          <li [ngClass]="isOnSection('groups') ? 'challenge-sections-selected' : ''" (click)="onGroups()"
              *ngIf="isMember()">
            <span class="challenge-sections-name">Groups</span>
            <svg width="32" height="32" viewBox="0 0 24 24">
              <g fill="none" stroke-linecap="round" stroke-width="1.5">
                <path d="M1 20v-1a7 7 0 0 1 7-7v0a7 7 0 0 1 7 7v1"/>
                <path d="M13 14v0a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v.5"/>
                <path stroke-linejoin="round" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8Zm10-3a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"/>
              </g>
            </svg>
          </li>
          <li [ngClass]="isOnSection('leaderboard') ? 'challenge-sections-selected' : ''" (click)="onLeaderboard()"
              *ngIf="isSelfMemberAuthor() || challenge.config.leaderboardBeforeStart">
            <span class="challenge-sections-name">Leaderboard</span>
            <svg width="32" height="32" viewBox="0 0 24 24">
              <path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M15 21H9v-8.4a.6.6 0 0 1 .6-.6h4.8a.6.6 0 0 1 .6.6V21Zm5.4 0H15v-2.9a.6.6 0 0 1 .6-.6h4.8a.6.6 0 0 1 .6.6v2.3a.6.6 0 0 1-.6.6ZM9 21v-4.9a.6.6 0 0 0-.6-.6H3.6a.6.6 0 0 0-.6.6v4.3a.6.6 0 0 0 .6.6H9Zm1.806-15.887l.909-1.927a.312.312 0 0 1 .57 0l.91 1.927l2.032.311c.261.04.365.376.176.568l-1.47 1.5l.347 2.118c.044.272-.228.48-.462.351l-1.818-1l-1.818 1c-.233.128-.506-.079-.462-.351l.347-2.118l-1.47-1.5c-.19-.192-.085-.528.175-.568l2.034-.31Z"/>
            </svg>
          </li>
          <li [ngClass]="isOnSection('settings') ? 'challenge-sections-selected' : ''" (click)="onSettings()"
              *ngIf="isSelfMemberAuthor()">
            <span class="challenge-sections-name">Settings</span>
            <svg width="32" height="32" viewBox="0 0 24 24">
              <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
                <path d="M12 15a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"/>
                <path
                  d="m19.622 10.395l-1.097-2.65L20 6l-2-2l-1.735 1.483l-2.707-1.113L12.935 2h-1.954l-.632 2.401l-2.645 1.115L6 4L4 6l1.453 1.789l-1.08 2.657L2 11v2l2.401.655L5.516 16.3L4 18l2 2l1.791-1.46l2.606 1.072L11 22h2l.604-2.387l2.651-1.098C16.697 18.831 18 20 18 20l2-2l-1.484-1.75l1.098-2.652l2.386-.62V11l-2.378-.605Z"/>
              </g>
            </svg>
          </li>
        </ul>
        <button class="challenge-sections-nav-scroll-btn" (click)="onMenuRight()">
          <svg width="32" height="32" viewBox="0 0 24 24">
            <path
              d="M9.29 15.88L13.17 12L9.29 8.12a.996.996 0 1 1 1.41-1.41l4.59 4.59c.39.39.39 1.02 0 1.41L10.7 17.3a.996.996 0 0 1-1.41 0c-.38-.39-.39-1.03 0-1.42z"/>
          </svg>
        </button>
      </nav>
      <div #challenge_box class="challenge-box">
        <dfy-challenge-overview [challenge]="challenge" [members]="members" [selfMember]="selfMember"
                                *ngIf="isOnSection('overview')"></dfy-challenge-overview>
        <dfy-challenge-chats [section]="section" [challenge]="challenge" [selfMember]="selfMember"
                             *ngIf="isOnSection('chats')"></dfy-challenge-chats>
        <dfy-challenge-groups [section]="section" [challenge]="challenge" [members]="members"
                              *ngIf="isOnSection('groups')"></dfy-challenge-groups>
        <dfy-challenge-leaderboard [challenge]="challenge"
                                   *ngIf="(isSelfMemberAuthor() || challenge.config.leaderboardBeforeStart) && isOnSection('leaderboard')"></dfy-challenge-leaderboard>
        <dfy-challenge-settings [challenge]="challenge" [members]="members" [selfMember]="selfMember"
                                *ngIf="isSelfMemberAuthor() && isOnSection('settings')"></dfy-challenge-settings>
      </div>
    </div>
  </div>
</main>
<dfy-footer></dfy-footer>
